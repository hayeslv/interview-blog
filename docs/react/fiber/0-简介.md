## 性能瓶颈

- JS任务执行时间过长
  - 浏览器刷新频率为60Hz，大概16.6毫秒渲染一次，而JS线程和渲染线程是互斥的，所以如果JS线程执行任务时间超过16.6ms的话，就会导致掉帧，导致卡顿，解决方案就是React利用空闲时间进行更新，不影响渲染的执行。
  - 把一个耗时任务切分成一个个小任务，分布在每一帧里的方式就叫时间切片。



## 屏幕刷新率

- 目前大多数设备的屏幕刷新率为 60次/秒
- 浏览器渲染动画或页面的每一帧速率也需要跟设备屏幕的刷新率保持一致
- 页面是一帧一帧绘制出来的，当每秒绘制的帧数（FPS）达到60时，页面是流程的；小于这个值时，用户会感觉卡顿
- 每个帧的预算值是16.66毫秒（1/60秒）



## 帧

- 每个帧的开头包括样式计算、布局和绘制
- JavaScript执行**JavaScript引擎和页面渲染引擎在同一个渲染线程**，GUI渲染和JavaScript执行两者是互斥的
- 如果某个任务执行时间过长，浏览器会推迟渲染



## Fiber

- 我们可以通过某些调度策略合理分配CPU资源，从而提高用户的响应速度。
- 通过 Fiber 架构，让自己的调度过程变得可中断，适时地让出 CPU 执行权，可以让浏览器及时的响应用户交互。



### Fiber 是一个执行单元

- Fiber是一个执行单元，每次执行完成一个执行单元，React就会检查还剩多少时间，如果没有时间就将控制权让出去

































